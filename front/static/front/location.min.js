SEARCH_NAME="search",COORD_NAME="latlon",LAT_NAME="form-lat",LON_NAME="form-lon",SEARCH_FORM_NAME="form-search",DROPDOWN="dropdown",lat_dom=document.getElementById(LAT_NAME),lon_dom=document.getElementById(LON_NAME),search_form_dom=document.getElementById(SEARCH_FORM_NAME),search_dom=document.getElementById(SEARCH_NAME),coord_dom=document.getElementById(COORD_NAME),drop_dom=document.getElementById(DROPDOWN),search_parent_dom=search_form_dom.parentNode;function updateFormLocation(a,b){lat_dom.value=a.toString().substring(0,10),lon_dom.value=b.toString().substring(0,10)}function showSearch(){lat_dom.parentNode.style.display="none",lon_dom.parentNode.style.display="none",search_parent_dom.style.display=""}function showCoord(){lat_dom.parentNode.style.display="",lon_dom.parentNode.style.display="",search_parent_dom.style.display="none"}function clearDrops(){for(;drop_dom.firstChild;)drop_dom.removeChild(drop_dom.firstChild)}function addDrop(a,b,c){var d=document.createElement("a");d.className="dropdown-content",d.innerHTML=a,drop_dom.appendChild(d),d.addEventListener("click",function(){updateFormLocation(b,c),coord_dom.checked=!0,showCoord()},!1)}function _doResults(a){clearDrops();for(var b=a.features,c=[],d=0;d<b.length;d++){var e=b[d],f=e.properties;if("city"===f.osm_value||"town"===f.osm_value){var g=e.geometry.coordinates,h=f.name+", "+f.state+", "+f.country;c.includes(h)||(addDrop(h,g[1],g[0]),c.push(h))}}}function getResults(a){if(""===a)return void clearDrops();fetch("https://photon.komoot.de/api/?limit=5&q="+a).then(c=>c.json()).then(c=>{_doResults(c)}).catch(c=>{throw c})}function main(){showSearch(),search_dom.checked=!0,search_dom.disabled=!1,search_dom.parentNode.style.display="",search_dom.addEventListener("click",function(){showSearch()},!1),coord_dom.addEventListener("click",function(){showCoord()},!1);var a=null;search_form_dom.addEventListener("keydown",function(){clearTimeout(a),a=setTimeout(function(){getResults(search_form_dom.value)},250)},!1),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(function(b){showCoord(),coord_dom.checked=!0,updateFormLocation(b.coords.latitude,b.coords.longitude)})}main();